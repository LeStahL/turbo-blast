const char *sfx_frag =
"\n#version 130\n"
"const float c1=radians(180.);"
"const float W2=2.*c1;"
"float F(float r){return clamp(r,-1.,1.);}"
"float a(float r,float g2,float d){return smoothstep(r,g2,clamp(d,r,g2));}"
"float Q1(float d){return a(0.,1e-3,d);}"
"float _(float r){return sin(W2*mod(r,1.));}"
"float N1(float r,float d1){return sin(W2*mod(r,1.)+d1);}"
"float O2(float r,float E3){return sign(2.*fract(r)-1.+E3);}"
"float R(float r){return (4.*abs(fract(r)-.5)-1.);}"
"float W3(float g3){return 32.7*exp2(g3/12.);}"
"float O3(int F1){return (1.-2.*float (F1%2));}"
"float I3(int F1){return sin(.5*c1*float (F1));}"
"float I2(float d){return fract(sin(dot(vec2 (d),vec2 (12.9898,78.233)))*43758.5453);}"
"float H1(float d){return 1.+.333*d;}float I(float r){return .636*atan(r);}"
"float P2(float i,float r,float n1,float q1){return a(-.00001,r,i)-(1.-q1)*a(0.,n1,i-r);}"
"float C(float r,float K3){"
"float H=max(1.-2.*abs(abs(r)-1.),0.);"
"return r>=0.?min(r,1.)-.5/6.*H*H*H:max(r,-1.)+.5/6.*H*H*H;"
"}"
"float C(float r){return C(r,.5);}"
""
"\n#define P3 33.5667\n"
"\n#define k3 2\n"
"const float S3[2]=float [2](0.,20.);"
"const float k2[2]=float [2](0.,33.3333);"
"const float A3[1]=float [1](.6);"
"const float L3[1]=float [1](1.6667);"
"float S2,U1,T;"
""
"float A2;"
""
"\n#define C3 1.e-3\n"
""
""
"float v(float S,float m1,float L2,float M2)"
"{"
"float i=min(S,m1);"
"float q=L2*i+.5*(M2-L2)/m1*i*i;"
""
"if(S>m1)"
"{"
"q+=M2*(S-m1);"
"}"
"return q;"
"}"
""
"float f(float i,float X1)"
"{"
"i*=X1;"
"float y2=fract(i);"
"float B2=i-y2;"
"return mix(I2(floor(B2)/X1),I2(floor(B2+1.0)/X1),a(0.0,1.0,y2));"
"}"
""
"float M3(float i,float p1)"
"{"
"float y3=f(i,100.0)+0.2*f(i,550.0)+0.1*f(i,1050.0)*exp(-5.*i);"
"return p1*y3;"
"}"
""
"float R2(float d,float M,float a1,float K1,float T2,float C1,float D2)"
"{"
"return (d<a1?d/a1:d<a1+K1?1.:d<a1+K1+T2?(1.-(1.-C1)*(d-K1-a1)/T2):d<=M-D2?C1:d<=M?C1*(M-d)/D2:0.);"
"}"
""
"float L(float d,float p1,float B3)"
"{"
"return (1.-p1)*d+p1*sign(d)*0.5*(1.-cos(B3*c1*d));"
"}"
""
"float v2(int l,float m,float p){return m*(1.-_(float (l)*p));}"
"float h2(int l,float m,float p){return l%2==0?.1*m*_(float (l)*p):m*m*(1.-_(float (l)*p));}"
"float u2(int l,float m,float p){return m*(O3(l)*_(.5*float (l)*p+.25)-1.);}"
"float R3(int l,float m,float p){return l%2==0?0.:m*(1.-I3(l))*_(p);}"
"float T3(int l,float m,float p){return sqrt(m)*(1.+_(float (l)*(1.5+p)+.5*c1));}"
""
"float s(float i,float o,float r1,int b1,int E1,float h,float s1,float W1,float g1,float O1,float I1,float p,float D3,float o1)"
"{"
"float x2=0.;"
"float c2=o1>.99?1.:(o1<1.e-3?o:pow(o,1.-o1));"
"float v3=c2/s1;"
"float h3=1./(O1*c2);"
""
"float d1=o*i;"
"float U,m,P1,N2;"
"for(int l=1+int (D3/o-1.e-3);l<=b1;l+=E1)"
"{"
"U=float (l);"
"m=1./U;"
"P1=h<-1.?(h+2.)*v2(l,m,p)-(h+1.)*T3(l,m,p)"
":h<0.?(h+1.)*h2(l,m,p)-h*v2(l,m,p)"
":h<1.?(1.-h)*h2(l,m,p)+h*u2(l,m,p)"
":(h-1.)*R3(l,m,p)+(2.-h)*u2(l,m,p);"
""
"if(abs(P1)<1e-4)continue;"
""
"N2=pow(1.+pow(U*v3,W1),-.5)+g1*exp(-pow((U*o-s1)*h3,2.));"
""
"x2+=P1*N2*(N1(U*d1,r1)+N1(U*d1*(1.+I1),r1));"
"}"
"return C(x2);"
"}"
""
"float s(float i,float o,float r1,int b1,int E1,float h,float s1,float W1,float g1,float O1,float I1,float p,int o1)"
"{"
"return s(i,o,r1,b1,E1,h,s1,W1,g1,O1,I1,p,0.,o1);"
"}"
""
"float l1(float i,float u3,float x3,float c3,float N3,float d3,float m3,float d2,float p3,float r3,float s3,float l3)"
"{"
"float q=v(i,c3,u3,x3);"
"float m2=q+M3(i,1.);"
"return clamp(m3*.5*(_(q)+_((1.-d2)*q)),-1.,1.)*exp(-max(i-N3,0.)/d3)"
"+p3*clamp(l3*.5*(_(m2)+_((1.-d2)*m2)),-1.,1.)*exp(-max(i-r3,0.)/s3);"
"}"
""
"float p2(float i3)"
"{"
"return i3<0?0.:1.;"
"}"
""
"uniform float iBlockOffset;"
"uniform float iSampleRate;"
"uniform float iTexSize;"
"uniform sampler2D iSequence;"
"uniform float iSequenceWidth;"
""
"float f3(in float b)"
"{"
"float _3=mod(b,2.);"
"b=.5*b;"
"vec2 n3=vec2 (mod(b,iSequenceWidth),floor(b/iSequenceWidth));"
"vec4 r2=texelFetch(iSequence,ivec2(n3),0);"
"vec2 a3=mix(r2.rg,r2.ba,_3);"
"return round(dot(vec2 (255.,65280.),a3));"
"}"
""
"float c(int b)"
"{"
"float n1=f3(float (b));"
"float sign=floor(n1/32768.),"
"k1=floor(n1*9.765625e-4-sign*32.),"
"s2=n1-sign*32768.-k1*1024.;"
""
"if(k1==0.)"
"return mix(1.,-1.,sign)*5.960464477539063e-08*s2;"
"return mix(1.,-1.,sign)*(1.+s2*9.765625e-4)*pow(2.,k1-15.);"
"}"
""
"\n#define N 3\n"
"\n#define D 19\n"
"\n#define P 3\n"
"\n#define E 62\n"
"\n#define b3 52\n"
""
"int l2(int n){return int (c(n));}"
"int o3(int n){return int (c(n+1+1*N));}"
"float S1(int n){return c(n+1+2*N);}"
"float e3(int n){return c(n+1+3*N);}"
"float t3(int n){return c(n+1+4*N);}"
"float Z2(int n){return c(n+1+5*N);}float i2(int n){return c(n+1+6*N);}"
"float z2(int n){return c(n+1+6*N+1*D);}"
"int G2(int n){return int (c(n+1+6*N+2*D));}"
"float Y2(int n){return c(n+1+6*N+3*D);}"
"int f2(int n){return int (c(n+1+6*N+4*D));}"
"float _2(int n){return c(n+2+6*N+4*D+P);}"
"float n2(int n){return c(n+2+6*N+4*D+P+1*E);}"
"float a2(int n){return c(n+2+6*N+4*D+P+2*E);}"
"float o2(int n){return c(n+2+6*N+4*D+P+3*E);}"
"float w2(int n){return c(n+2+6*N+4*D+P+4*E);}"
"float Q2(int n){return c(n+2+6*N+4*D+P+5*E);}"
"float F2(int n){return c(n+2+6*N+4*D+P+6*E);}"
"float H2(int n){return c(n+2+6*N+4*D+P+7*E);}"
""
"vec2 q2(float S)"
"{"
"float e2=0.;"
"float t2=0.;"
"float Z1=0.;"
"float z1=0.;"
""
"if(S>P3)return vec2 (0.);"
""
"int k;"
"for(k=0;k<k3-2&&k2[k+1]<S;k++);"
"S2=A3[k];"
"U1=L3[k];"
"T=S3[k]+(S-k2[k])*S2;"
""
"float U2=S-.0002;"
"float i1=1.;"
""
"float e1,t1,W,g,Z,A1,f1,u,X2,M,K2,t,e,x,O,L1,o,M1,y1,X,B1,C2;"
"int R1,T1,z,G,D1,v1,h1,Y,w,K,A;"
""
"for(int y=0;y<N;y++)"
"{"
"R1=l2(y);"
"T1=l2(y+1);"
""
"K=o3(y);"
"O=e3(y)+1.e-3;"
"L1=t3(y);"
""
"for(z=R1;(z<T1-1)&&(T>i2(z+1)-L1);z++);"
"for(G=R1;(G<T1-1)&&(T>=z2(G)+O);G++);"
""
"for(int Q=G;Q<=z;Q++)"
"{"
"Z=T-i2(Q)+L1;"
""
"D1=G2(Q);"
"v1=f2(D1);"
"h1=f2(D1+1);"
""
"for(Y=v1;(Y<h1-1)&&(Z>_2(Y+1));Y++);"
"for(w=v1;(w<h1-1)&&(Z>=n2(w)+O);w++);"
""
"for(int B=w;B<=Y;B++)"
"{"
"if(K==139)"
"{"
"A=int (a2(B));"
"O=H2(A)+1.e-3;"
"}"
""
"e1=0.;"
"t1=0.;"
"W=0.;"
"g=0.;"
""
"A1=_2(B);"
"f1=n2(B)+O;"
"M=f1-A1;"
"K2=M*U1;"
"u=max(0.,Z-A1);X2=u/M;"
"t=u*U1;"
"e=t-.0002;x=w2(B);"
"M1=clamp(1.-o2(B),0.,1.);"
"y1=clamp(1.+o2(B),0.,1.);"
"B1=Q2(B);"
"C2=F2(B);"
""
"if(K==139)"
"{"
"X=S1(y)*Q1(u)*Q1(M-u);"
"if(A==0){i1=min(i1,1.-x*(clamp(1.e4*u,0.,1.)-pow(u/(M-O),8.)));}"
"else if(A==5){"
"W=x*.9*l1(t,242.,55.,.036,.03,.0666,1.42,.02,.25,.01,.1,.4)"
"+.9*l1(t,3333.,340.,.008,0.,.01,2.,2.4,0.,.2,.3,1.)"
"+.64*((clamp(2.27*R(v(t,.03,241.,72.)),-1.,1.)*(1.-a(-1e-3,0.,t-.01))+.91*clamp(.9*R(v(t,.03,241.,72.)+.91*f(t,8164.)),-1.,1.)*exp(-20.76*t)+.05*f(t,10466.)*(1.-a(0.,.18,t-.56))+.56*f(t,7123.)*exp(-t*5.45)+.11*f(t,1134.)*exp(-t*13.82))*a(0.,.004,t));"
"g=x*.9*l1(e,242.,55.,.036,.03,.0666,1.42,.02,.25,.01,.1,.4)"
"+.9*l1(e,3333.,340.,.008,0.,.01,2.,2.4,0.,.2,.3,1.)"
"+.64*((clamp(2.27*R(v(e,.03,241.,72.)),-1.,1.)*(1.-a(-1e-3,0.,e-.01))+.91*clamp(.9*R(v(e,.03,241.,72.)+.91*f(e,8164.)),-1.,1.)*exp(-20.76*e)+.05*f(e,10466.)*(1.-a(0.,.18,e-.56))+.56*f(e,7123.)*exp(-e*5.45)+.11*f(e,1134.)*exp(-e*13.82))*a(0.,.004,e));"
"}"
"else if(A==7){"
"W=x*.85*(clamp(1.15*R(v(t,.13,157.,76.)),-1.,1.)*(1.-a(-1e-3,0.,t-.13))+.81*clamp(.24*R(v(t,.13,157.,76.)+.81*f(t,2401.)),-1.,1.)*exp(-14.8*t)+.01*f(t,4079.)*(1.-a(0.,.7,t-.12))+.5*f(t,5164.)*exp(-t*19.79)+.76*f(t,8446.)*exp(-t*24.))*a(0.,.002,t);"
"g=x*.85*(clamp(1.15*R(v(e,.13,157.,76.)),-1.,1.)*(1.-a(-1e-3,0.,e-.13))+.81*clamp(.24*R(v(e,.13,157.,76.)+.81*f(e,2401.)),-1.,1.)*exp(-14.8*e)+.01*f(e,4079.)*(1.-a(0.,.7,e-.12))+.5*f(e,5164.)*exp(-e*19.79)+.76*f(e,8446.)*exp(-e*24.))*a(0.,.002,e);"
"}"
"else if(A==10){"
"W=x*(f(t,10000.)*a(0.,.01,t)*(1.-(1.-.13)*a(0.,.12,t-.01))-.3*(1.00*f((t-0.00),10000.)*a(0.,.01,(t-0.00))*(1.-(1.-.13)*a(0.,.12,(t-0.00)-.01))+.61*f((t-1.20e-03),10000.)*a(0.,.01,(t-1.20e-03))*(1.-(1.-.13)*a(0.,.12,(t-1.20e-03)-.01))+.372*f((t-2.40e-03),10000.)*a(0.,.01,(t-2.40e-03))*(1.-(1.-.13)*a(0.,.12,(t-2.40e-03)-.01))));"
"g=x*(f(t,10000.)*a(0.,.01,t)*(1.-(1.-.13)*a(0.,.12,t-.01))-.3*(1.00*f((t-0.00),10000.)*a(0.,.01,(t-0.00))*(1.-(1.-.13)*a(0.,.12,(t-0.00)-.01))+.61*f((t-1.20e-03),10000.)*a(0.,.01,(t-1.20e-03))*(1.-(1.-.13)*a(0.,.12,(t-1.20e-03)-.01))+.372*f((t-2.40e-03),10000.)*a(0.,.01,(t-2.40e-03))*(1.-(1.-.13)*a(0.,.12,(t-2.40e-03)-.01))));"
"}"
"else if(A==12){"
"W=x*1.2*fract(sin(t*100.*.5)*50000.*.5)*P2(t,0.,.03,.1)*exp(-13.*u);"
"g=x*1.2*fract(sin(e*100.*.5)*50000.*.5)*P2(e,0.,.03,.1)*exp(-13.*u);"
"}"
"else if(A==21){"
"W=x*((clamp(1.09*R(v(t,.08,249.,77.)),-1.,1.)*(1.-a(-1e-3,0.,t-.04))+.97*clamp(.99*R(v(t,.08,249.,77.)+.97*f(t,9855.)),-1.,1.)*exp(-21.22*t)+.03*f(t,10655.)*(1.-a(0.,.58,t-.81))+.71*f(t,7520.)*exp(-t*16.22)+.57*f(t,4386.)*exp(-t*29.48))*a(0.,.005,t));"
"g=x*((clamp(1.09*R(v(e,.08,249.,77.)),-1.,1.)*(1.-a(-1e-3,0.,e-.04))+.97*clamp(.99*R(v(e,.08,249.,77.)+.97*f(e,9855.)),-1.,1.)*exp(-21.22*e)+.03*f(e,10655.)*(1.-a(0.,.58,e-.81))+.71*f(e,7520.)*exp(-e*16.22)+.57*f(e,4386.)*exp(-e*29.48))*a(0.,.005,e));"
"}"
""
"if(A>0)"
"{"
"Z1+=M1*C(X*W);"
"z1+=y1*C(X*g);"
"}"
"}"
"else "
"{"
"o=W3(a2(B)+Y2(Q));"
""
"if(abs(B1)>1e-3){"
"float _1=Z2(y);"
"float u1=B1*log(2.)/12.;"
"if(u<=_1)"
"{"
"float x1=1.-u/_1;"
"o*=_1*(H1(u1)-x1*H1(u1*x1*x1))/u;"
"}"
"else "
"{"
"o*=1.+(_1*(H1(u1)-1.))/u;"
"}"
"}"
""
"X=Q1(u)*(1.-a(f1-O,f1,Z));"
"if(K==0){e1=_(o*t);t1=_(o*e);}"
"else if(K==113){"
"U2=S-0.007;e=t-0.007;"
"e1=.9*x*(.4*L(I(2.*(2.*fract(.2497*o*(t-0.0*(1.+1.3*_(.9*t)))+.02)-1.)+s((t-0.0*(1.+1.3*_(.9*t))),.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s((t-0.0*(1.+1.3*_(.9*t))),.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.)"
"+.4*L(I(2.*(2.*fract(.2497*o*(t-3.0e-03*(1.+1.3*_(.9*t)))+.02)-1.)+s((t-3.0e-03*(1.+1.3*_(.9*t))),.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s((t-3.0e-03*(1.+1.3*_(.9*t))),.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.)"
"+.4*L(I(2.*(2.*fract(.2497*o*(t-6.0e-03*(1.+1.3*_(.9*t)))+.02)-1.)+s((t-6.0e-03*(1.+1.3*_(.9*t))),.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s((t-6.0e-03*(1.+1.3*_(.9*t))),.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.))"
"+.9*x*(.8*(2.*fract(.2497*o*t+.02)-1.)+s(t,.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s(t,.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.))*exp(-6.*max(t-.115,0.))"
"+.3*x*L(I(2.*(2.*fract(.2497*o*t+.02)-1.)+s(t,.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s(t,.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.)*exp(-6.*max(t-.115,0.));"
"t1=.9*x*(.4*L(I(2.*(2.*fract(.2497*o*(e-0.0*(1.+1.3*_(.9*e)))+.02)-1.)+s((e-0.0*(1.+1.3*_(.9*e))),.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s((e-0.0*(1.+1.3*_(.9*e))),.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.)"
"+.4*L(I(2.*(2.*fract(.2497*o*(e-3.0e-03*(1.+1.3*_(.9*e)))+.02)-1.)+s((e-3.0e-03*(1.+1.3*_(.9*e))),.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s((e-3.0e-03*(1.+1.3*_(.9*e))),.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.)"
"+.4*L(I(2.*(2.*fract(.2497*o*(e-6.0e-03*(1.+1.3*_(.9*e)))+.02)-1.)+s((e-6.0e-03*(1.+1.3*_(.9*e))),.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s((e-6.0e-03*(1.+1.3*_(.9*e))),.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.))"
"+.9*x*(.8*(2.*fract(.2497*o*e+.02)-1.)+s(e,.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s(e,.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.))*exp(-6.*max(e-.115,0.))"
"+.3*x*L(I(2.*(2.*fract(.2497*o*e+.02)-1.)+s(e,.5009*o,0.,16,1,-1.,10.*o,1.,10.,1.,.015,1.,0.,0.)+.8*s(e,.25*o,0.,32,1,-.6,1000.,100.,0.,1.,.02,.3,0.,0.)),6.,3.)*exp(-6.*max(e-.115,0.));"
"}"
"else if(K==138){"
""
"e1=p2(T)*(R2(u,M,.007,0.,.01,1.,.01)*(L(s(t,.5*o,0.,256,2,1.+.9*(.55+(.4*F((1.+1.)*_(4.*T)))),(1088.+(863.*N1(2.*T,.4))),10.,5.37,3.85,.005,.4*(.55+(.4*F((1.+1.)*_(4.*T)))),0.,0.),1.,3.)+.8*F((1.+.5)*_(.499*o*t))+.4*O2(1.01*o*t,.95)));"
"t1=p2(T)*(R2(u,M,.007,0.,.01,1.,.01)*(L(s(e,.5*o,0.,256,2,1.+.9*(.55+(.4*F((1.+1.)*_(4.*T)))),(1088.+(863.*N1(2.*T,.4))),10.,5.37,3.85,.005,.4*(.55+(.4*F((1.+1.)*_(4.*T)))),0.,0.),1.,3.)+.8*F((1.+.5)*_(.499*o*e))+.4*O2(1.01*o*e,.95)));"
"}"
""
"e2+=M1*S1(y)*C(clamp(X,0.,1.)*e1);"
"t2+=y1*S1(y)*C(clamp(X,0.,1.)*t1);"
"}"
"}"
""
"}"
"}"
"float b2=.5*i1*e2+.67*Z1;"
"float E2=.5*i1*t2+.67*z1;"
"return vec2 ("
"b2,"
"E2);"
"}"
""
"void main()"
"{"
"A2=1./iSampleRate;"
"float i=(iBlockOffset+gl_FragCoord.x+gl_FragCoord.y*iTexSize)*A2;"
"vec2 q1=q2(i);"
"vec2 G1=floor((0.5+0.5*q1)*65535.0);"
"vec2 Y1=mod(G1,256.0)/255.0;"
"vec2 w1=floor(G1/256.0)/255.0;"
"gl_FragColor=vec4 (Y1.x,w1.x,Y1.y,w1.y);"
"}"
""
;
